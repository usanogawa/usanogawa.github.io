<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>出目で解説！オイカワのサイコロ自己紹介</title>
<style>
  :root { --bg:#0b0b0e; --card:#141419; --accent:#e53935; --text:#f5f6fa; --muted:#a7a9be; }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Hiragino Kaku Gothic ProN","Noto Sans JP","Yu Gothic",Meiryo,sans-serif;}
  .wrap{max-width:960px;margin:24px auto;padding:16px}
  header{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
  h1{font-size:clamp(20px,3.6vw,28px);margin:0 0 4px}
  .badge{background:var(--card);border:1px solid #222;padding:6px 10px;border-radius:999px;font-size:12px;color:var(--muted)}
  .notice,.about{background:#111318;border:1px solid #23242c;border-radius:14px;padding:16px;margin:12px 0}
  .notice h2,.about h2{margin:0 0 8px;font-size:16px;color:var(--muted);letter-spacing:.04em}
  .notice p,.about p{margin:0 0 8px;line-height:1.8}
  .notice ul{margin:0;padding-left:18px;color:var(--muted)}
  .notice li{margin:4px 0}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:14px 0}
  .card{background:var(--card);border:1px solid #222;border-radius:14px;padding:14px}
  .card h2{font-size:14px;margin:0 0 10px;color:var(--muted);letter-spacing:.04em}
  .select{appearance:none;width:100%;padding:12px;border-radius:10px;border:1px solid #333;background:#0f0f14;color:var(--text);font-size:16px}
  .actions{display:flex;gap:12px;flex-wrap:wrap;margin:14px 0}
  button{border:1px solid #333;background:#1a1a22;color:var(--text);padding:12px 14px;border-radius:12px;font-weight:600;cursor:pointer}
  button.primary{background:var(--accent);border-color:#c62828}
  button:active{transform:translateY(1px)}
  .result{background:#111217;border:1px solid #23232a;border-radius:14px;padding:16px;margin-top:4px}
  .result h3{margin:0 0 8px;font-size:16px;color:var(--muted)}
  .result p{margin:0;font-size:18px;line-height:1.7}
  .hint{font-size:12px;color:var(--muted);margin-top:8px}
  footer{margin:28px 0 12px;color:var(--muted);font-size:12px}
  .pill{display:inline-block;background:#191a22;border:1px solid #2a2b35;border-radius:999px;padding:4px 10px;margin-right:6px;font-size:12px}
  details.editor{margin-top:12px}
  details.editor summary{cursor:pointer;color:var(--muted)}
  .editor-box{background:#0f1116;border:1px dashed #2a2b35;border-radius:12px;padding:12px;margin-top:8px}
  .editor-box textarea{width:100%;min-height:100px;border-radius:10px;border:1px solid #333;background:#0b0c11;color:var(--text);padding:10px;font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
  .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .tiny{font-size:12px;color:var(--muted)}
  input[type="file"]{display:none}
  label.btn{border:1px solid #333;background:#1a1a22;color:var(--text);padding:10px 12px;border-radius:12px;font-weight:600;cursor:pointer}
</style>
<body>
<div class="wrap">
  <header>
    <h1>出目で解説！オイカワのサイコロ自己紹介</h1>
    <span class="badge">体験型 / 3×6×6 = 216通り</span>
    <span class="badge">A=視点 / B=カテゴリ / C=具体</span>
  </header>

  <!-- 説明ブロック -->
  <section class="notice">
    <h2>サイコロの出目を選んでね</h2>
    <p>
      実物サイコロを振ったら、出た<strong>A・B・C</strong>の出目を
      それぞれ下のプルダウンで選択してください。
      その後、<em>「解説を表示」</em>ボタンを押すと文章が生成されます。
    </p>
    <ul>
      <li>A＝視点（好き／得意／大事／憧れ／挑戦／推し）</li>
      <li>B＝カテゴリ（食べ物／場所／趣味／物／習慣／体験）</li>
      <li>C＝具体（カレー／山梨／映画／歩く／繪／桃）</li>
    </ul>
  </section>

  <section class="about">
    <h2>このアプリについて</h2>
    <p>
      これは「サイコロ自己紹介」の<strong>テキスト解説</strong>です。サイコロの組み合わせから、
      <strong>オイカワの自己紹介の詳細</strong>、さらに小ネタや補足も表示します。
      216通りの出目＝<strong>一面では語れないオイカワ</strong>を一緒に発見してね。
    </p>
  </section>

  <!-- 選択UI -->
  <div class="grid">
    <div class="card">
      <h2>A（視点）</h2>
      <select class="select" id="selA" aria-label="Aサイコロ"></select>
    </div>
    <div class="card">
      <h2>B（カテゴリ）</h2>
      <select class="select" id="selB" aria-label="Bサイコロ"></select>
    </div>
    <div class="card">
      <h2>C（具体）</h2>
      <select class="select" id="selC" aria-label="Cサイコロ"></select>
    </div>
  </div>

  <div class="actions">
    <button id="btnExplain" class="primary">解説を表示</button>
    <button id="btnRoll">サイコロを振る（ランダム）</button>
  </div>

  <div class="result" id="resultBox" hidden>
    <h3>生成結果</h3>
    <p id="resultText"></p>
    <div class="hint" id="hintText"></div>
  </div>


<script>
/* ========= データセット ========= */
const DATASET = {
  A: [
    { id: "好き",  label: "好き",   template: "私は{B_C}が好き。" },
    { id: "得意",  label: "得意",   template: "私は{B_C}が得意。" },
    { id: "大事",  label: "大事",   template: "私は{B_C}を大事にしている。" },
    { id: "憧れ",  label: "憧れ",   template: "私は{B_C}に憧れている。" },
    { id: "挑戦",  label: "挑戦",   template: "私は{B_C}に挑戦している。" },
    { id: "推し",  label: "推し",   template: "私の推しは{B_C}。" }
  ],
  B: [
    { id: "食べ物", label: "食べ物" },
    { id: "場所",   label: "場所" },
    { id: "趣味",   label: "趣味" },
    { id: "物",     label: "物" },
    { id: "習慣",   label: "習慣" },
    { id: "体験",   label: "体験" },
  ],
  C: [
  { id: "カレー", label: "カレー" },
  { id: "山梨",  label: "山梨"  },
  { id: "映画",  label: "映画"  },
  { id: "歩く",  label: "歩く"  },
  { id: "繪",    label: "繪"    },
  { id: "桃",    label: "桃"    },
]
  
};

/* ========= 特定組み合わせ辞書（初期サンプル） ========= */
// キーは「A|B|C」
const DEFAULT_COMBOS = {
  
  "好き|食べ物|カレー": {
    "text": "腹が減ったらカレーを食べるの好き",
    "hint": "小中共にカレーのおかわりにはもちろん並んだね"
  },
  "好き|食べ物|山梨": {
    "text": "山梨の食べ物なんでも好き",
    "hint": "談合坂上りのサービスエリアのかぼちゃほうとう美味いよ"
  },
  "好き|食べ物|映画": {
    "text": "映画館で食べるチュロスが好き",
    "hint": "チュロス渡された時、なんかテープで補強されてるな〜って思ったら、チュロス折れてた"
  },
  "好き|食べ物|歩く": {
    "text": "食べ歩きするのが好き",
    "hint": "特に、鎌倉、川越、浅草での食べ歩きが好き"
  },
  "好き|食べ物|繪": {
    "text": "食べ物の絵を見るの好き",
    "hint": "美味しく食べ物の絵を描ける人、羨ましい"
  },
  "好き|食べ物|桃": {
    "text": "桃を食べるの好き",
    "hint": "甘くて、ジューシ！桃味の〇〇みたいなのもいい"
  },
  "好き|場所|カレー": {
    "text": "カレー屋さんが好き",
    "hint": "いい香りがすると思ったら、CoCo壱があったぜ"
  },
  "好き|場所|山梨": {
    "text": "山梨の土地が好き",
    "hint": "涼しくて、空気も美味しく感じる"
  },
  "好き|場所|映画": {
    "text": "映画館が好き",
    "hint": "でっかい画面と、爆音！最高！"
  },
  "好き|場所|歩く": {
    "text": "広めの歩道が好き",
    "hint": "自転車も気にせず、歩行者を避ける心配もなくのびのび歩けるからね"
  },
  "好き|場所|繪": {
    "text": "景色の絵が好き",
    "hint": "太陽の光の色が建物に反射した世界が色づく絵が好き"
  },
  "好き|場所|桃": {
    "text": "山梨の桃もいいけど、福島の桃も良",
    "hint": "福島のふるさと納税で桃がたくさん届くよ"
  },
  "好き|趣味|カレー": {
    "text": "無印のレトルトカレー探すの好き",
    "hint": "やっぱり、バターチキン味買いがち"
  },
  "好き|趣味|山梨": {
    "text": "山梨の小道を歩くのが好き",
    "hint": "たまにリスとか見かけたりする"
  },
  "好き|趣味|映画": {
    "text": "映画の最中、使用されたレトロな曲の元を探すのが好き",
    "hint": "隠された名曲を見つけた時が至福"
  },
  "好き|趣味|歩く": {
    "text": "歩きながら音楽を聴くのが趣味",
    "hint": "その時はまった曲を無限にリピート"
  },
  "好き|趣味|繪": {
    "text": "イラスト描くのは幼少期からの趣味",
    "hint": "500円玉サイズの落書きするのが好き"
  },
  "好き|趣味|桃": {
    "text": "シャトレーゼの桃味のアイスを見つけて食べるのが趣味",
    "hint": "なかなか、最寄で見つからなかったり……"
  },
  "好き|物|カレー": {
    "text": "バターチキンカレーが好き！",
    "hint": "YouTubeでレシピ見てヨーグルトにチキン漬けて作ったり"
  },
  "好き|物|山梨": {
    "text": "山梨の日本酒が好き",
    "hint": "春鶯囀（しゅんのうてん）が飲みやすかった"
  },
  "好き|物|映画": {
    "text": "ライフ・イズ・ビューティフルが好きな作品",
    "hint": "戦時中の家族愛や、息子を楽しませる父の姿、全てが美しくて感動する"
  },
  "好き|物|歩く": {
    "text": "クーリッシュを食べながら夜道の散歩が好き",
    "hint": "クーリッシュは風邪引いた時も美味い"
  },
  "好き|物|繪": {
    "text": "笑顔のイラストが好き",
    "hint": "いろんな笑顔の形があって、絵でしか見れない表現もあって好き"
  },
  "好き|物|桃": {
    "text": "昔飲んだ桃味のコーラが好き",
    "hint": "当時のラベルを財布に入れて、とっておいた過去"
  },
  "好き|習慣|カレー": {
    "text": "毎週金曜はカレー系料理の日",
    "hint": "キーマカレーやこくまろを使った具材ごろごろカレーを作ったり食べたり"
  },
  "好き|習慣|山梨": {
    "text": "山梨に行くならば談合坂SAに寄る",
    "hint": "上りの方で食べれる味噌カツ丼が美味い"
  },
  "好き|習慣|映画": {
    "text": "予告PVっていいよね",
    "hint": "映画本編のワクワク感が詰まっていて好き"
  },
  "好き|習慣|歩く": {
    "text": "最寄駅までは必ず歩く",
    "hint": "15分間歩いて、音楽聴いてが好き"
  },
  "好き|習慣|繪": {
    "text": "好きなキャラクターの絵を探す",
    "hint": "漫画やアニメでは見られない二次創作ならではの一面"
  },
  "好き|習慣|桃": {
    "text": "桃の季節が好き",
    "hint": "夏が来る〜って感じがする"
  },
  "好き|体験|カレー": {
    "text": "みんなで作るカレーが好き",
    "hint": "作業を分担して、煮込んで、みんなで食べる！"
  },
  "好き|体験|山梨": {
    "text": "陶芸体験が好き",
    "hint": "『陶房のぎ』での手びねり体験はいい思い出"
  },
  "好き|体験|映画": {
    "text": "映画の作品の撮影地に行くの好き",
    "hint": "まるで映画の世界にいる気分"
  },
  "好き|体験|歩く": {
    "text": "鳩を見るのが好き",
    "hint": "高円寺にいるアルビノ鳩ちゃんをよく見かけます"
  },
  "好き|体験|繪": {
    "text": "みんなで絵を描くのが好き",
    "hint": "大きな紙にブワァって描いた、高校時代"
  },
  "好き|体験|桃": {
    "text": "桃狩りが好き",
    "hint": "自分で桃を選んで、狩るのが面白い！"
  },
  "得意|食べ物|カレー": {
    "text": "カレーを作るのが得意",
    "hint": "３時間かけて煮込んで、お肉ほろほろにします"
  },
  "得意|食べ物|山梨": {
    "text": "ほうとうを練るのが得意",
    "hint": "家で小麦粉練って家族で食べる"
  },
  "得意|食べ物|映画": {
    "text": "ポップコーンの早食いが得意",
    "hint": "映画見終わった後、やば！食べきってない！って時あるんだよね"
  },
  "得意|食べ物|歩く": {
    "text": "食べ歩きが得意なのだ",
    "hint": "早食いしちゃうから、こぼさず食べられるのだ"
  },
  "得意|食べ物|繪": {
    "text": "食べ物の絵を描くのが得意",
    "hint": "美味しそうに見えるかは別としてね"
  },
  "得意|食べ物|桃": {
    "text": "桃の早食いが得意",
    "hint": "ジュルっと食べれられるって、もう飲み物だ"
  },
  "得意|場所|カレー": {
    "text": "カレー屋を見つけるのが得意",
    "hint": "昼ごはんに困ったら、カレー屋一直線！"
  },
  "得意|場所|山梨": {
    "text": "山梨の宿を探すのが得意",
    "hint": "ペンションやコテージ、いいところはたくさん"
  },
  "得意|場所|映画": {
    "text": "映画の座席確保が得意",
    "hint": "映画館によって椅子の高さに合わせてちょうどいい席を予約"
  },
  "得意|場所|歩く": {
    "text": "斜面を歩くのが得意",
    "hint": "えげつない角度でも、足首を曲げて歩くよ"
  },
  "得意|場所|繪": {
    "text": "口を描くのが得意",
    "hint": "歯とか舌とか、いいよね"
  },
  "得意|場所|桃": {
    "text": "桃の種を取るのが得意",
    "hint": "包丁使うより、ハサミを使う方がおすすめ"
  },
  "得意|趣味|カレー": {
    "text": "カレーうどんは白Tシャツで食える",
    "hint": "私の白Tは誰にも汚させない！！"
  },
  "得意|趣味|山梨": {
    "text": "趣味は山梨めぐり",
    "hint": "得意なのは観光スポットを外さないプラン作り"
  },
  "得意|趣味|映画": {
    "text": "上映後に友達を語り沼に引き込むことが得意",
    "hint": "感想以上に考察トークタイムが始まる"
  },
  "得意|趣味|歩く": {
    "text": "歩きながら喋るのが得意",
    "hint": "景色見るなりで、溢れる雑学雑談"
  },
  "得意|趣味|繪": {
    "text": "ペンを持つと時間の概念を忘れるのが特技",
    "hint": "風呂の時間逃しがち（キャンセルはしない）"
  },
  "得意|趣味|桃": {
    "text": "得意なのは“完熟の見分け",
    "hint": "熟した桃はめちゃめちゃうまい"
  },
  "得意|物|カレー": {
    "text": "ナンを使って残さずカレーをすくい取れる",
    "hint": "お残しはゆるしまへんで！！"
  },
  "得意|物|山梨": {
    "text": "お土産を探すのが得意",
    "hint": "ワインでも鍋敷でも山梨でしかないものを"
  },
  "得意|物|映画": {
    "text": "映画を予約するのが得意",
    "hint": "金曜ロードショーはチェック欠かさず"
  },
  "得意|物|歩く": {
    "text": "ブーツでディズニーも山も登れる",
    "hint": "なんかブーツの方がクッション性良くて疲れない気がする"
  },
  "得意|物|繪": {
    "text": "クルトガ、ドクグリで絵を描くのが得意",
    "hint": "学生時代の相棒すぎる！"
  },
  "得意|物|桃": {
    "text": "桃ソムリエなのだ",
    "hint": "冷蔵庫にある大量の桃から熟しているか判別できる"
  },
  "得意|習慣|カレー": {
    "text": "玉ねぎはいつも飴色に炒める",
    "hint": "根性と、塩と水を入れて弱火で炒める"
  },
  "得意|習慣|山梨": {
    "text": "ROCKっていうカレー屋さんに並ぶのが得意",
    "hint": "清里に旅行するときは必ずROCKに行く"
  },
  "得意|習慣|映画": {
    "text": "映画館には30分前には着く",
    "hint": "早めに着かないとポップコーンが買えないよね"
  },
  "得意|習慣|歩く": {
    "text": "メンタル維持のために1時間強、歩いている",
    "hint": "歩いている間はストレスフリー！"
  },
  "得意|習慣|繪": {
    "text": "曲を聴いて描きたい絵の構図を決める",
    "hint": "歌詞や曲調からインスピレーションが湧き出る"
  },
  "得意|習慣|桃": {
    "text": "桃フラッペの時期は毎回飲む",
    "hint": "見た目気にせず、しっかり混ぜてから飲むと最後まで美味しい！"
  },
  "得意|体験|カレー": {
    "text": "高校の同級生５人とカレーを作る",
    "hint": "私は役割分担してみんなをまとめるシェフに"
  },
  "得意|体験|山梨": {
    "text": "リフトにスムーズに乗るのが得意",
    "hint": "過去に帽子を落とした頃があります。もう帽子は着けない"
  },
  "得意|体験|映画": {
    "text": "ポップコーンを食べるタイミングが分かります",
    "hint": "騒音で車が事故る瞬間。そう、今です！"
  },
  "得意|体験|歩く": {
    "text": "長距離でも苦なく歩ける",
    "hint": "お正月は徒歩で七福神巡り"
  },
  "得意|体験|繪": {
    "text": "アルコールインクアートが得意",
    "hint": "CREA BASEのアート体験がとっても楽しい！"
  },
  "得意|体験|桃": {
    "text": "桃を食べて無言になること",
    "hint": "あまりの幸福で言葉を失うタイプ"
  },
  "大事|食べ物|カレー": {
    "text": "赤い福神漬けが欠かせない",
    "hint": "甘い漬物が合うんですよ"
  },
  "大事|食べ物|山梨": {
    "text": "大事なのは、山梨で食べることそのもの",
    "hint": "空気と一緒に味わうのが最高のスパイス"
  },
  "大事|食べ物|映画": {
    "text": "映画館のチュロスは大事な食べ物",
    "hint": "物語の入り口は“甘い香り”から始まる"
  },
  "大事|食べ物|歩く": {
    "text": "歩く日の食べ物は大事",
    "hint": "インゼリーとダカラちゃん"
  },
  "大事|食べ物|繪": {
    "text": "描く前に食べるスイーツが大事",
    "hint": "甘さがインスピレーションを呼ぶ"
  },
  "大事|食べ物|桃": {
    "text": "桃は大事な食べ物",
    "hint": "やわらかさも香りも、全部“癒し”の象徴"
  },
  "大事|場所|カレー": {
    "text": "ナンの焼ける音がする場所",
    "hint": "ナンってなんなん"
  },
  "大事|場所|山梨": {
    "text": "山梨は大事な場所",
    "hint": "行くたびに自分をリセットできる"
  },
  "大事|場所|映画": {
    "text": "後ろの席に座る人、隣の人前の人",
    "hint": "日頃の行いで良し悪し別れるよ"
  },
  "大事|場所|歩く": {
    "text": "足音が染み込んだ場所ほど、好きになっていく",
    "hint": "家の周りの煩悩消しルートでよく歩く"
  },
  "大事|場所|繪": {
    "text": "家で書く",
    "hint": "ゆっくり書いて、適度に集中できる"
  },
  "大事|場所|桃": {
    "text": "桃畑は大事な場所",
    "hint": "がないと桃食えないだよ"
  },
  "大事|趣味|カレー": {
    "text": "カレーは大事な趣味",
    "hint": "食材を買うところから冒険の始まり"
  },
  "大事|趣味|山梨": {
    "text": "山梨旅は大事な趣味",
    "hint": "景色と空気が好き。必ず住むからね"
  },
  "大事|趣味|映画": {
    "text": "映画は大事な趣味",
    "hint": "新しい物語に出会うたび、自分の中の誰かが目を覚ます"
  },
  "大事|趣味|歩く": {
    "text": "歩くのは大事な趣味",
    "hint": "頭を空っぽにできる、いちばん簡単なセラピー"
  },
  "大事|趣味|繪": {
    "text": "“描く”は大事な趣味",
    "hint": "だかスランプは消えてくれ"
  },
  "大事|趣味|桃": {
    "text": "桃を味わうのは大事な趣味",
    "hint": "桃味の〇〇も然り"
  },
  "大事|物|カレー": {
    "text": "カレー皿が大事な物",
    "hint": "盛りつけひとつで味も気持ちも変わる"
  },
  "大事|物|山梨": {
    "text": "山梨で買ったおみやげ",
    "hint": "リスのバッグがほんと好き"
  },
  "大事|物|映画": {
    "text": "大事な物は映画の半券",
    "hint": "無くしたら怖いじゃん"
  },
  "大事|物|歩く": {
    "text": "イヤホンが大事",
    "hint": "気分はミュージカル"
  },
  "大事|物|繪": {
    "text": "アイパッドぉおおおおお",
    "hint": "指でもう描けないよ！！！！"
  },
  "大事|物|桃": {
    "text": "大事な物は桃の香水",
    "hint": "あれば良いのだが"
  },
  "大事|習慣|カレー": {
    "text": "週に一度のカレー曜日",
    "hint": "他の家から香るカレーで今日あの家カレーなんだってなる"
  },
  "大事|習慣|山梨": {
    "text": "山梨に行くのは大事な習慣",
    "hint": "旅×セルフケア"
  },
  "大事|習慣|映画": {
    "text": "年明けには映画を見る",
    "hint": "1日暇だからね"
  },
  "大事|習慣|歩く": {
    "text": "歩くのは大事な習慣",
    "hint": "考えごとは歩きながら片づける"
  },
  "大事|習慣|繪": {
    "text": "描くのは大事な習慣",
    "hint": "描かないとほんとすぐに下手になる"
  },
  "大事|習慣|桃": {
    "text": "桃を食べるのは大事な習慣",
    "hint": "夏を待つ"
  },
  "大事|体験|カレー": {
    "text": "友達と食べたカレーの味が忘れられない",
    "hint": "一人で食べるよりみんなで"
  },
  "大事|体験|山梨": {
    "text": "大事な体験は山梨の朝",
    "hint": "ただその空間に身を任せて深呼吸"
  },
  "大事|体験|映画": {
    "text": "初めて映画館で泣いた日",
    "hint": "煉獄さん"
  },
  "大事|体験|歩く": {
    "text": "知らない道を歩いて迷った日",
    "hint": "Googleマップに助けてもらおう"
  },
  "大事|体験|繪": {
    "text": "人に絵を褒められた瞬間",
    "hint": "承認欲求満たされるよ"
  },
  "大事|体験|桃": {
    "text": "山梨で食べた完熟桃",
    "hint": "ビュッフェだったから、たくさん食った"
  },
  "憧れ|食べ物|カレー": {
    "text": "誰かのためにカレーを作れる人",
    "hint": "特異料理披露したい"
  },
  "憧れ|食べ物|山梨": {
    "text": "山梨の食卓に憧れる",
    "hint": "ほうとう鍋囲みたい"
  },
  "憧れ|食べ物|映画": {
    "text": "映画の中に出てくる食べ物に憧れる",
    "hint": "特にジブリ！ニシンのパイは作ったことある"
  },
  "憧れ|食べ物|歩く": {
    "text": "歩きながら食べるパン",
    "hint": "出会い頭で転びたい"
  },
  "憧れ|食べ物|繪": {
    "text": "絵に描きたくなる食べ物に憧れる",
    "hint": "見た瞬間に“美味しい”が伝わる色"
  },
  "憧れ|食べ物|桃": {
    "text": "高級なの食べたい",
    "hint": "10000円越えの食べたい。下さい"
  },
  "憧れ|場所|カレー": {
    "text": "カレー屋の厨房",
    "hint": "ただカレーを作りたい"
  },
  "憧れ|場所|山梨": {
    "text": "住みたい",
    "hint": "必ず住む"
  },
  "憧れ|場所|映画": {
    "text": "ロケ地",
    "hint": "海外のロケ地巡りしたい"
  },
  "憧れ|場所|歩く": {
    "text": "知らない路地",
    "hint": "道に迷うことが、発見のはじまり。"
  },
  "憧れ|場所|繪": {
    "text": "アトリエ",
    "hint": "光がやわらかく差すアトリエで毛布に包まれて"
  },
  "憧れ|場所|桃": {
    "text": "桃畑",
    "hint": "爺ちゃんの桃畑で雷兄弟のシーンを想起"
  },
  "憧れ|趣味|カレー": {
    "text": "いろんな国のカレーを食べ歩く",
    "hint": "世界をスプーンで旅したい"
  },
  "憧れ|趣味|山梨": {
    "text": "季節ごとに山梨を巡るのが憧れ",
    "hint": "遠いから移動のコストを心配せず行ける財力欲しい"
  },
  "憧れ|趣味|映画": {
    "text": "短編映画制作",
    "hint": "絵が描けん。キャラを動かしたい"
  },
  "憧れ|趣味|歩く": {
    "text": "歩きながら撮る写真に憧れる",
    "hint": "写真を綺麗に撮れたらなぁ"
  },
  "憧れ|趣味|繪": {
    "text": "憧れの趣味は油絵",
    "hint": "高校の時だけ軽く油絵に挑戦したっけな"
  },
  "憧れ|趣味|桃": {
    "text": "桃マスター",
    "hint": "美味しい桃の銘柄を言えるようになりたい"
  },
  "憧れ|物|カレー": {
    "text": "真鍮のカレースプーン",
    "hint": "カレーのためのカレーカラトリー"
  },
  "憧れ|物|山梨": {
    "text": "酒",
    "hint": "信玄餅のお酒があるとかないとか"
  },
  "憧れ|物|映画": {
    "text": "映画のポスターに憧れる",
    "hint": "文字と絵の一枚で“世界観”を作れるのがすごい"
  },
  "憧れ|物|歩く": {
    "text": "古い地図に憧れる",
    "hint": "冒険したい"
  },
  "憧れ|物|繪": {
    "text": "憧れるのは、飾るための“額縁",
    "hint": "自分の作品を誇れる日を夢見て"
  },
  "憧れ|物|桃": {
    "text": "桃用ナイフ",
    "hint": "桃？切るの任せてよって言いたいね"
  },
  "憧れ|習慣|カレー": {
    "text": "休日の朝にカレーを煮込む",
    "hint": "時間をゆっくり“味わう”生活にしたい"
  },
  "憧れ|習慣|山梨": {
    "text": "朝に山梨産桃ジュースを飲む",
    "hint": "小さな習慣で、一日を甘く始めたい"
  },
  "憧れ|習慣|映画": {
    "text": "毎月一本、劇場で映画を観る",
    "hint": "今はまだこれは贅沢"
  },
  "憧れ|習慣|歩く": {
    "text": "日暮れの散歩",
    "hint": "朝と夜は歩くけど、時間的に夕方はあまりない"
  },
  "憧れ|習慣|繪": {
    "text": "毎日完璧なものを描き上げる",
    "hint": "じみじみコツコツ"
  },
  "憧れ|習慣|桃": {
    "text": "桃のデザートを食べながら日記を書く",
    "hint": "丁寧な暮らし"
  },
  "憧れ|体験|カレー": {
    "text": "現地の人と一緒にスパイスを調合する",
    "hint": "言葉より香りで通じ合う瞬間に憧れる"
  },
  "憧れ|体験|山梨": {
    "text": "山梨でスキー",
    "hint": "スキー一回しかしたことない"
  },
  "憧れ|体験|映画": {
    "text": "4DXを見る",
    "hint": "酔いやすいから見れたらいいな"
  },
  "憧れ|体験|歩く": {
    "text": "知らない街を歩いて、思わぬ出会いをする",
    "hint": "こーいしちゃったんだ。たぶん！"
  },
  "憧れ|体験|繪": {
    "text": "バズる",
    "hint": "夢のまた夢"
  },
  "憧れ|体験|桃": {
    "text": "収穫を手伝う",
    "hint": "働きたい"
  },
  "挑戦|食べ物|カレー": {
    "text": "激辛カレーに挑戦したい",
    "hint": "限界を超えた先に見える世界を味わってみたい"
  },
  "挑戦|食べ物|山梨": {
    "text": "山梨の食材だけでフルコースを作る",
    "hint": "私にできるのかしら"
  },
  "挑戦|食べ物|映画": {
    "text": "映画に出てくる料理を再現する",
    "hint": "ラタトゥーユとか"
  },
  "挑戦|食べ物|歩く": {
    "text": "“食べ歩きマップ”を自分でデザインすること",
    "hint": "ラーメン率多そう"
  },
  "挑戦|食べ物|繪": {
    "text": "食べた瞬間の“おいしい”を絵で伝えるシリーズを描きたい",
    "hint": "自分がもうラーメン食べたい"
  },
  "挑戦|食べ物|桃": {
    "text": "食べ比べ企画",
    "hint": "格付けチェックしたい"
  },
  "挑戦|場所|カレー": {
    "text": "路地裏のカレー屋",
    "hint": "まだ知られてない“隠れ名店”を見つけたい"
  },
  "挑戦|場所|山梨": {
    "text": "山梨でドライブ",
    "hint": "圧倒的な景色を見ながら、自分の手で運転したい"
  },
  "挑戦|場所|映画": {
    "text": "海外でよく見る外てみる映画",
    "hint": "車で、腰掛けながら見たい"
  },
  "挑戦|場所|歩く": {
    "text": "夜の公園を歩いてみたい",
    "hint": "怖そう。怖いの苦手だけど"
  },
  "挑戦|場所|繪": {
    "text": "屋外でライブペイント",
    "hint": "そのためにもスラスラ描けるようになりてぇ"
  },
  "挑戦|場所|桃": {
    "text": "桃の産地で“桃色の展示空間”を作る",
    "hint": "桃まみれ。桃太郎"
  },
  "挑戦|趣味|カレー": {
    "text": "全国のご当地カレーを制覇",
    "hint": "自分なりの“スパイス地図”を作ってみたい"
  },
  "挑戦|趣味|山梨": {
    "text": "山梨のカフェ巡り",
    "hint": "山梨カフェマスターに俺はなる！"
  },
  "挑戦|趣味|映画": {
    "text": "映画レビューを書く",
    "hint": "語彙力を分けてください"
  },
  "挑戦|趣味|歩く": {
    "text": "歩く時間を“観察の訓練”に変えたい",
    "hint": "人や光の動きを記録してみる。目で"
  },
  "挑戦|趣味|繪": {
    "text": "“1日1枚・即興ドローイング”",
    "hint": "考える前に描く勇気をつけたい"
  },
  "挑戦|趣味|桃": {
    "text": "桃の木を育てる",
    "hint": "桃の畑を所有したい"
  },
  "挑戦|物|カレー": {
    "text": "“オリジナルカレー粉”",
    "hint": "自分でスパイスを調合して作りたい"
  },
  "挑戦|物|山梨": {
    "text": "山梨の桃をモチーフにしたプロダクトデザイン",
    "hint": "山梨も桃もブランディングしてみたい"
  },
  "挑戦|物|映画": {
    "text": "映画のサウンドから着想を得たポスターを作ってみたい",
    "hint": "主題歌に合わせたポスターとか"
  },
  "挑戦|物|歩く": {
    "text": "歩いた距離で色が変わる靴紐を開発したい",
    "hint": "助けてドラえもん"
  },
  "挑戦|物|繪": {
    "text": "絵をプリントした布を使って、服や小物を作ってみたい",
    "hint": "オリジナルグッズはロマンあり"
  },
  "挑戦|物|桃": {
    "text": "桃をテーマにしたアクセサリーを作りたい",
    "hint": "ピアス、リング、ネックレス……"
  },
  "挑戦|習慣|カレー": {
    "text": "“毎週違うカレーを食べる”こと",
    "hint": "無印カレー食べ比べしたい"
  },
  "挑戦|習慣|山梨": {
    "text": "“月に一度、山梨に行く日”をつくること",
    "hint": "早急に実現したい"
  },
  "挑戦|習慣|映画": {
    "text": "観た映画を一行でメモする習慣",
    "hint": "ピクサー作品の名言とか集めたい"
  },
  "挑戦|習慣|歩く": {
    "text": "毎日同じ道を歩いて、季節の変化を探すこと",
    "hint": "考え事ばっかでちゃんと景色を見てみたい"
  },
  "挑戦|習慣|繪": {
    "text": "“1日1スケッチ”を続けること",
    "hint": "推し描くのが一番楽"
  },
  "挑戦|習慣|桃": {
    "text": "“季節の果物を味わう時間”を大切にすること",
    "hint": "桃も、マスカットも、梨も"
  },
  "挑戦|体験|カレー": {
    "text": "カレー教室体験したい",
    "hint": "教えてもらいたい"
  },
  "挑戦|体験|山梨": {
    "text": "山梨の“桃農家の一日”を体験すること",
    "hint": "体験させてください！ここで体験したいです！"
  },
  "挑戦|体験|映画": {
    "text": "“映画撮影の現場”を体験すること",
    "hint": "こうやってできる現場にいたい"
  },
  "挑戦|体験|歩く": {
    "text": "夜の街を一人で歩く",
    "hint": "“怖さと自由”を同時に味わってみたい"
  },
  "挑戦|体験|繪": {
    "text": "自分の絵を“ライブドローイング”で披露すること",
    "hint": "ライブできるほどの実力も手にしたい"
  },
  "挑戦|体験|桃": {
    "text": "また、桃食べ放題したい",
    "hint": "飲み物のように桃を食べたい"
  },
  "推し|食べ物|カレー": {
    "text": "こくまろとバーモンドをブレンドして作るカレー",
    "hint": "作ってみて。美味しいよ"
  },
  "推し|食べ物|山梨": {
    "text": "山梨の食べ物の推しポイントは、旬がはっきりしてること",
    "hint": "特に秋がおすすめ"
  },
  "推し|食べ物|映画": {
    "text": "爽健美茶",
    "hint": "炭酸は、ガスに注意だから推奨できないよ"
  },
  "推し|食べ物|歩く": {
    "text": "歩きながら食べるアイス",
    "hint": "クーリッシュは結構相性いい"
  },
  "推し|食べ物|繪": {
    "text": "描く時に食べる氷砂糖",
    "hint": "虫歯には細心の注意を"
  },
  "推し|食べ物|桃": {
    "text": "推し食べ物はもちろん桃",
    "hint": "獪岳くんが食べてるもんね"
  },
  "推し|場所|カレー": {
    "text": "家から15分のところにあったカレー屋さん",
    "hint": "火事でなくなりました"
  },
  "推し|場所|山梨": {
    "text": "KIYOSATO",
    "hint": "早く行きたい行きたい行きたい行きたい行きたい"
  },
  "推し|場所|映画": {
    "text": "トイレ",
    "hint": "結構トイレ数多いところが好き。余るくらいの"
  },
  "推し|場所|歩く": {
    "text": "歩道橋の上が推し",
    "hint": "あとは、高速道路が見えるとことか"
  },
  "推し|場所|繪": {
    "text": "手と口",
    "hint": "描くのが楽しい"
  },
  "推し|場所|桃": {
    "text": "白桃のグラデーション",
    "hint": "美しすぎる"
  },
  "推し|趣味|カレー": {
    "text": "人参を星型に切ること",
    "hint": "余裕があったらの話"
  },
  "推し|趣味|山梨": {
    "text": "山梨旅行",
    "hint": "私を山梨に連れて行ってください"
  },
  "推し|趣味|映画": {
    "text": "映画の後のアニメイトに行くこと",
    "hint": "池袋は良きとこです"
  },
  "推し|趣味|歩く": {
    "text": "音楽聴きながら歩く",
    "hint": "エレクトロスウィングが好き"
  },
  "推し|趣味|繪": {
    "text": "推しを描くのが一番幸せ",
    "hint": "こだわるあまり、筆が遅くなるが"
  },
  "推し|趣味|桃": {
    "text": "桃を皮ごと食べてたんです",
    "hint": "推しが。ちゃんと剥いてから食べよ！？"
  },
  "推し|物|カレー": {
    "text": "ヒレカツと合わせるのがおすすめ",
    "hint": "カツカレーは相性良くて美味しい"
  },
  "推し|物|山梨": {
    "text": "山梨という土地が好き",
    "hint": "早く、山梨に連れて行って。頼む。行っていいか？"
  },
  "推し|物|映画": {
    "text": "入場者特典が良い",
    "hint": "プリキュアオールスターズDXのコップは今でも大切"
  },
  "推し|物|歩く": {
    "text": "ウェストポーチがめちゃいいよ",
    "hint": "邪魔にならないサイズで、最低限の荷物がちょうど入る"
  },
  "推し|物|繪": {
    "text": "フィギュががよい",
    "hint": "全身のディティールを見ながら描ける"
  },
  "推し|物|桃": {
    "text": "桃の入った段ボール",
    "hint": "の、桃を包むネット。優しく桃を守ってくれる騎士"
  },
  "推し|習慣|カレー": {
    "text": "玉ねぎを切るときは氷水に漬ける",
    "hint": "涙流して作りたくない"
  },
  "推し|習慣|山梨": {
    "text": "理想だが、早朝車に乗って高速乗って、山梨に行く",
    "hint": "山梨が私を待っている。早く連れて行って。免許ください"
  },
  "推し|習慣|映画": {
    "text": "映画を見る日は髪を結ばないこと",
    "hint": "解かないと背もたれで頭に当たって痛くなるよ"
  },
  "推し|習慣|歩く": {
    "text": "ディズニーを歩くときはパークBGMに心を委ねる",
    "hint": "特に、メディテレーニアンハーバーは旅行気分"
  },
  "推し|習慣|繪": {
    "text": "推しの登場シーンを見る",
    "hint": "俺は常にどんな時も、正しく俺を評価する者につく"
  },
  "推し|習慣|桃": {
    "text": "推しが！推しが桃を食べてます！",
    "hint": "あ！弟弟子に投げないでください！！"
  },
  "推し|体験|カレー": {
    "text": "旅先で食べたカレー",
    "hint": "チーズもかけて美味しかった"
  },
  "推し|体験|山梨": {
    "text": "初めて八ヶ岳に行った時。ソフトクリームを食べて",
    "hint": "鼻血が出ました"
  },
  "推し|体験|映画": {
    "text": "音に耳が圧倒されて",
    "hint": "家では得られない大画面の迫力が好き"
  },
  "推し|体験|歩く": {
    "text": "一人で横浜や鎌倉を歩くのがいい",
    "hint": "近くて、手軽で、情報も多いからね"
  },
  "推し|体験|繪": {
    "text": "初めて描いたのは犬夜叉だろうか",
    "hint": "小学生の頃は模写ができるだけでチヤホヤされた"
  },
  "推し|体験|桃": {
    "text": "家に大量の桃が届く瞬間",
    "hint": "食べ放題！！？？"
  }


};

/* ========= コンボ辞書のロード/保存 ========= */
const LS_KEY = "dice_combos_v1";
function loadCombos(){
  let user = {};
  try{ user = JSON.parse(localStorage.getItem(LS_KEY) || '{}'); }catch(e){ user = {}; }
  // ユーザー定義が優先（上書き）
  return { ...DEFAULT_COMBOS, ...user };
}
let COMBOS = loadCombos();
function saveCombo(key, text, hint){
  const current = JSON.parse(localStorage.getItem(LS_KEY) || '{}');
  current[key] = { text, hint };
  localStorage.setItem(LS_KEY, JSON.stringify(current));
  COMBOS = loadCombos();
}

/* ========= UI生成 ========= */
const selA = document.getElementById('selA');
const selB = document.getElementById('selB');
const selC = document.getElementById('selC');
const resBox = document.getElementById('resultBox');
const resTxt  = document.getElementById('resultText');
const hintTxt = document.getElementById('hintText');
const nowKey  = document.getElementById('nowKey');
const editText= document.getElementById('editText');
const editHint= document.getElementById('editHint');

function fillSelect(el, options){
  el.innerHTML = options.map(o=>`<option value="${o.id}">${o.label}</option>`).join('');
}
fillSelect(selA, DATASET.A);
fillSelect(selB, DATASET.B);
fillSelect(selC, DATASET.C);

function byId(arr, id){ return arr.find(x=>x.id===id); }
function currentKey(){ return `${selA.value}|${selB.value}|${selC.value}`; }

function updateEditorKey(){
  const key = currentKey();
  nowKey.textContent = key;
  const combo = COMBOS[key] || { text: "", hint: "" };
  editText.value = combo.text || "";
  editHint.value = combo.hint || "";
}
['change','input'].forEach(ev=>{
  selA.addEventListener(ev, updateEditorKey);
  selB.addEventListener(ev, updateEditorKey);
  selC.addEventListener(ev, updateEditorKey);
});

function generate(){
  const a = byId(DATASET.A, selA.value);
  const b = byId(DATASET.B, selB.value);
  const c = byId(DATASET.C, selC.value);
  const key = `${a.id}|${b.id}|${c.id}`;
  const combo = COMBOS[key];
  let sentence = ""; let hint = "";
  if (combo) {
    sentence = combo.text; hint = combo.hint || "";
  } else {
    const bc = bcConnector(b, c);
    sentence = a.template.replace("{B_C}", bc);
    hint = pickHint(c);
  }
  resTxt.textContent = sentence;
  hintTxt.textContent = hint;
  resBox.hidden = false;
}
function roll(){
  selA.selectedIndex = Math.floor(Math.random()*DATASET.A.length);
  selB.selectedIndex = Math.floor(Math.random()*DATASET.B.length);
  selC.selectedIndex = Math.floor(Math.random()*DATASET.C.length);
  updateEditorKey();
  generate();
}

document.getElementById('btnExplain').addEventListener('click', generate);
document.getElementById('btnRoll').addEventListener('click', roll);
document.getElementById('btnCopy').addEventListener('click', async ()=>{
  const a = selA.value, b= selB.value, c= selC.value;
  const text = `A:${a} / B:${b} / C:${c}\n${resTxt.textContent}\n${hintTxt.textContent ? "補足: "+hintTxt.textContent : ""}`;
  try{ await navigator.clipboard.writeText(text); alert("コピーしたよ！"); }
  catch(e){ alert("コピーできなかったので手動で選択してね！"); }
});

document.getElementById('btnSaveCombo').addEventListener('click', ()=>{
  const key = currentKey();
  saveCombo(key, editText.value.trim(), editHint.value.trim());
  alert(`保存しました：${key}`);
});

document.getElementById('btnExport').addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify(COMBOS, null, 2)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'combos.json';
  a.click();
  URL.revokeObjectURL(a.href);
});

document.getElementById('fileImport').addEventListener('change', (e)=>{
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ()=>{
    try{
      const json = JSON.parse(reader.result);
      localStorage.setItem(LS_KEY, JSON.stringify(json));
      COMBOS = loadCombos();
      updateEditorKey();
      alert('読み込みました！');
    }catch(err){
      alert('JSONの読み込みに失敗しました…');
    }
  };
  reader.readAsText(file);
});

// 初期表示
updateEditorKey();
</script>
</body>
</html>
